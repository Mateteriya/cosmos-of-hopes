# –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∞–π–∫–∏

## –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –ª–∞–π–∫–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É `supports` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö Supabase.

## –°–ø–æ—Å–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–∞–π–∫–æ–≤

### 1. –ß–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —ë–ª–∫–∏ (`/tree`):**
- –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –ª—é–±–æ–π —à–∞—Ä –Ω–∞ —ë–ª–∫–µ
- –û—Ç–∫—Ä–æ–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–µ—Ç–∞–ª—è–º–∏ —à–∞—Ä–∞
- –í –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ª–∞–π–∫–æ–≤ (–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è)

**–ö–∞–∫ –ª–∞–π–∫–Ω—É—Ç—å:**
- –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —à–∞—Ä
- –í –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "‚ù§Ô∏è –õ–∞–π–∫" –∏–ª–∏ "üëç –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å"
- –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞, –≤–æ–∑–º–æ–∂–Ω–æ –≤—ã —É–∂–µ –ª–∞–π–∫–Ω—É–ª–∏ —ç—Ç–æ—Ç —à–∞—Ä

### 2. –ß–µ—Ä–µ–∑ Supabase Dashboard

1. –í–æ–π–¥–∏—Ç–µ –≤ Supabase Dashboard
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **Table Editor**
3. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É **supports**
4. –¢–∞–º –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤—Å–µ –ª–∞–π–∫–∏:
   - `toy_id` - ID —à–∞—Ä–∞
   - `supporter_tg_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –ª–∞–π–∫–Ω—É–ª
   - `created_at` - –≤—Ä–µ–º—è –ª–∞–π–∫–∞

**SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ –ª–∞–π–∫–æ–≤ —à–∞—Ä–∞:**
```sql
SELECT COUNT(*) as likes_count
FROM supports
WHERE toy_id = 'ID_–®–ê–†–ê';
```

**SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –ª–∞–π–∫–Ω—É–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
```sql
SELECT *
FROM supports
WHERE toy_id = 'ID_–®–ê–†–ê'
AND supporter_tg_id = 'ID_–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø';
```

**SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è —Ç–æ–ø —à–∞—Ä–æ–≤ –ø–æ –ª–∞–π–∫–∞–º:**
```sql
SELECT toy_id, COUNT(*) as likes_count
FROM supports
GROUP BY toy_id
ORDER BY likes_count DESC
LIMIT 10;
```

### 3. –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (F12) –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/tree` –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```javascript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –ª–∞–π–∫–Ω—É–ª –ª–∏ —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —à–∞—Ä
// (–Ω—É–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∏—Ç—å TEMP_USER_ID –∏–∑ –∫–æ–¥–∞)
```

### 4. –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–í –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ `lib/toys.ts`:

```typescript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –ª–∞–π–∫–Ω—É–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —à–∞—Ä
const hasLiked = await hasUserLikedAnyBall(userId);

// –î–æ–±–∞–≤–∏—Ç—å –ª–∞–π–∫
await addSupport(toyId, userId);
```

## –û—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ –ª–∞–π–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–°—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ç–∞–±–ª–∏—Ü–∞ `supports`?**
   ```sql
   SELECT * FROM supports LIMIT 1;
   ```

2. **–í–∫–ª—é—á–µ–Ω –ª–∏ Realtime –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `supports`?**
   - Dashboard ‚Üí Database ‚Üí Replication
   - –ò–ª–∏ —á–µ—Ä–µ–∑ SQL:
   ```sql
   ALTER PUBLICATION supabase_realtime ADD TABLE supports;
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫**

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab** –≤ DevTools - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ Supabase

## –£–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –±—É–¥—É—â–µ–≥–æ

–°–º. `LIKES_SYSTEM.md` –¥–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –ø–æ —É–ª—É—á—à–µ–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã –ª–∞–π–∫–æ–≤, –≤–∫–ª—é—á–∞—è:
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ª–∞–π–∫–æ–≤ –≤ UI
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–±—Ä–∞—Ç—å –ª–∞–π–∫
- Realtime –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

