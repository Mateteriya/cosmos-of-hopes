# Настройка комнат

## Текущее состояние

Комнаты уже создаются и работают, но нет полноценной страницы настроек комнаты.

## Что нужно реализовать

### 1. Страница настроек комнаты (`/room/[roomId]/settings`)

**Функционал:**
- Изменение названия комнаты
- Изменение кода приглашения (с генерацией нового)
- Удаление комнаты
- Управление участниками (просмотр списка, исключение)
- Настройки комнаты:
  - Часовой пояс комнаты
  - Тема оформления
  - Программа мероприятия
  - Время наступления Нового года

### 2. Компоненты для реализации

#### `app/room/[roomId]/settings/page.tsx`
- Главная страница настроек комнаты
- Доступ только для создателя комнаты
- Форма редактирования настроек

#### `components/rooms/RoomSettings.tsx`
- Компонент формы настроек
- Валидация полей
- Сохранение изменений

#### `components/rooms/RoomMembers.tsx`
- Список участников комнаты
- Возможность исключить участника (только для создателя)

### 3. API функции (дополнить `lib/rooms.ts`)

```typescript
// Обновить комнату
export async function updateRoom(roomId: string, updates: Partial<Room>, userId: string): Promise<Room>

// Удалить комнату
export async function deleteRoom(roomId: string, userId: string): Promise<void>

// Получить участников комнаты
export async function getRoomMembers(roomId: string): Promise<Array<{ user_id: string; joined_at: string }>>

// Исключить участника из комнаты
export async function removeRoomMember(roomId: string, memberId: string, userId: string): Promise<void>

// Генерировать новый код приглашения
export async function regenerateInviteCode(roomId: string, userId: string): Promise<string>
```

### 4. Структура базы данных

Нужно проверить наличие таблиц:
- `rooms` - уже есть
- `room_members` - может потребоваться для отслеживания участников

### 5. UI/UX

- Ссылка "Настройки" на странице комнаты (только для создателя)
- Модальное окно или отдельная страница
- Подтверждение при удалении комнаты
- Уведомления об успешных операциях

### 6. Безопасность

- Проверка прав доступа (только создатель может редактировать)
- Валидация входных данных
- Защита от SQL-инъекций (через Supabase)

## Приоритет реализации

1. **Высокий**: Обновление настроек комнаты (название, код приглашения)
2. **Средний**: Управление участниками
3. **Низкий**: Удаление комнаты

